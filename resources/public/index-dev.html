<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport"
              content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0"/>
        <title>Flurfunk</title>
        <link rel="stylesheet" type="text/css" href="flurfunk.css"/>
        <link rel="stylesheet" type="text/css" href="flurfunk-mobile.css"
              media="only screen and (max-device-width: 480px)"/>
        <script>
            function enableUrlInput(enable) {
                document.getElementById("server-url").disabled = !enable;
            }

            function reloadPage() {
                var url = location.href,
                    parametersIndex = url.indexOf("#");
                if (parametersIndex != -1)
                    url = url.substring(0, parametersIndex);
                if (document.getElementById("use-real-server").checked)
                    url += "#server=" + document.getElementById("server-url").value;
                window.location.href = url;
            }
        </script>
    </head>
    <body>
        <form>
            <input type="checkbox" id="use-real-server" onchange="enableUrlInput(this.checked)"/>
            <label for="use-real-server">Use real server</label>

            <label for="server-url">URL:</label>
            <input id="server-url" type="text"/>

            <button onclick="reloadPage()">Reload</button>
        </form>
        <hr/>

        <script>
            function getParameter(name) {
                var parameters = location.hash.substring(1).split("&");
                for (var i = 0; i < parameters.length; i++) {
                    var pair = parameters[i].split("=");
                    if (pair[0] == name)
                        return pair[1];
                }
                return null;
            }
 
            // The Flurfunk server's URL. The stub server is used when it is null.
            var flurfunkServer = getParameter("server");
            if (flurfunkServer) {
                document.getElementById("server-url").value = flurfunkServer;
                document.getElementById("use-real-server").checked = true;
            } else
                enableUrlInput(false);
        </script>
        <script src="flurfunk-dev.js"></script>
    </body>
</html>
